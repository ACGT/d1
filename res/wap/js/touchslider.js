(function(e,l,P){function k(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?B[I.call(a)]||"object":typeof a}function h(a){return(a+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/ig,function(a,c){return(c+"").toUpperCase()})}function C(a){a=h(a);var b=h(J+a);return a in w&&a||b in w&&b||""}function K(a){var b=0,c;if("number"==k(a.length))b=a.length;else if("keys"in Object)b=Object.keys(a).length;else for(c in a)a.hasOwnProperty(c)&&b++;return b}function L(a,b){return"item"in a?
a.item(b):function(){var a=0,d;for(d in this)if(a++==b)return this[d]}.call(a,b)}function f(a,b){var c=k(a);if(a&&"function"!=c&&"string"!=c&&(0===a.length||a.length&&(1==a.nodeType||a.length-1 in a))){if("function"==k(a.forEach))return a.forEach(b);for(var c=0,d=a.length,m;c<d;c++)m=a[c],"undefined"!=k(m)&&b(m,c,a)}else for(d in a)b(d,a[d],a)}function D(a){var b=[];f(a.children||a.childNodes,function(a){1==a.nodeType&&b.push(a)});return b}function r(a,b){return(e.getComputedStyle&&e.getComputedStyle(a,
null)||a.currentStyle||a.style)[b]}function x(a,b){f(b,function(b,d){var m;switch(b){case "float":m=C("cssFloat")?"cssFloat":"styleFloat";break;default:m=h(b)}try{a.style[m]=d}catch(g){}})}function t(a,b,c){if("object"==k(b))return f(b,function(b,c){t(a,b,c)});f(b.split(" "),function(b){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c})}function u(a,b,c){if("object"==k(b))return f(b,function(b,c){u(a,b,c)});f(b.split(" "),function(b){a.removeEventListener?
a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null})}function M(a){var b={},c=a.which,d=a.button,m,g;f(["wheelDelta","detail","which","keyCode"],function(c){b[c]=a[c]});b.oldEvent=a;b.type=a.type.toLowerCase();b.eventType=E[b.type]||b.type;b.eventCode=y[b.type]||0;b.pointerType=F[a.pointerType]||a.pointerType||b.eventType;b.target=a.target||a.srcElement||n.documentElement;3===b.target.nodeType&&(b.target=b.target.parentNode);b.preventDefault=function(){a.preventDefault&&
a.preventDefault();b.returnValue=a.returnValue=!1};if(m=G[b.eventType]){switch(b.eventType){case "mouse":case "pointer":g=a.pointerId||0;3==b.eventCode?delete m[g]:m[g]=a;break;case "touch":G[b.eventType]=m=a.touches}if(g=L(m,0))b.clientX=g.clientX,b.clientY=g.clientY;b.button=4>c?Math.max(0,c-1):d&4&&1||d&2;b.length=K(m)}return b}var H=0,N=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(a){var b=+new Date,c=Math.max(1E3/60,1E3/
60-(b-H));H=b+c;return setTimeout(a,c)},z=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout,n=e.document,w=n.createElement("div").style,J=function(){for(var a=["-webkit-","-moz-","-o-","-ms-"],b;b=a.shift();)if(h(b+"transform")in w)return b;return""}(),p=C("transition"),I=Object.prototype.toString,O=[].slice,B={},E={},y={click:4,mousewheel:5,dommousescroll:5,keydown:6,resize:7},
F={2:"touch",3:"pen",4:"mouse",pen:"pen"},v=[],A=[];(function(){var a={},b={start:1,down:1,move:2,end:3,up:3,cancel:3};f(["mouse","touch","pointer","MSPointer-"],function(c){var d=/pointer/i.test(c)?"pointer":c;a[d]=a[d]||{};F[d]=d;f(b,function(b,g){var e=h(c+b);a[d][e]=g;E[e.toLowerCase()]=d;y[e.toLowerCase()]=g;1==g?v.push(e):A.push(e)})});f("otransitionend oTransitionEnd webkitTransitionEnd mozTransitionEnd MSTransitionEnd transitionend".split(" "),function(a){v.push(a);y[a.toLowerCase()]=8});
return a})();var G={touch:{},pointer:{},mouse:{}};f("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a){B["[object "+a+"]"]=a.toLowerCase()});l.prototype={version:"2.0.1",constructor:l,latestTime:0,init:function(a){var b=this,c=this.handler=function(a){b.handleEvent(a)};this.events={};this.duration=isNaN(parseInt(a.duration))?600:parseInt(a.duration);this.direction=0==parseInt(a.direction)?0:1;this.current=parseInt(a.start)||0;this.mouse=null==a.mouse?!0:!!a.mouse;
this.mousewheel=!!a.mousewheel;this.interval=parseInt(a.interval)||5E3;this.playing=null==a.autoplay?!0:!!a.autoplay;this.arrowkey=!!a.arrowkey;this.fullsize=null==a.fullsize?!0:!!a.fullsize;this.align=a.align||"center";this.pages=D(this.container);this.length=this.pages.length;this.pageData=[];t(this.container,v.join(" ")+" click"+(this.mousewheel?" mousewheel DOMMouseScroll":""),c);t(n,A.join(" ")+(this.arrowkey?" keydown":""),c);t(e,"resize",c);f(this.pages,function(a){b.pageData.push({cssText:a.style.cssText||
""})});this.pageData.container=this.container.style.cssText||"";this.on({before:function(){clearTimeout(this.playTimer)},dragStart:function(){clearTimeout(this.playTimer);var a;e.getSelection?(a=getSelection(),"empty"in a?a.empty():"removeAllRanges"in a&&a.removeAllRanges()):n.selection.empty()},after:this.firePlay}).firePlay();this.resize()},resize:function(){var a=this,b=this.direction?"height":"width",c=r(this.container,"position"),d;this.size=this.getSize(this.offsetParent=this.container["absolute"==
c||"fixed"==c?"offsetParent":"parentNode"]||n.body);d={float:"left",display:"inline"};f(this.pages,function(c){a.fullsize&&(d[b]=a.size-a.getMarginSize(c)-a.getPaddingSize(c)-a.getBorderSize(c)+"px");"height"==b&&(d.clear="both");x(c,d)});this.total=this.getSum(0,this.length);d={};"static"==c&&(d={position:"relative"});d[p]="none";d[b]=this.total+"px";d[this.direction?"top":"left"]=this.getPos(this.current)+"px";z(this.timer);x(this.container,d);clearTimeout(this.playTimer);return this.firePlay()},
on:function(a,b){var c=this;"object"==k(a)?f(a,function(a,b){c.on(a,b)}):(this.events[a]||(this.events[a]=[]),this.events[a].push(b));return this},fire:function(a){var b=this,c=O.call(arguments,1);f(this.events[a]||[],function(a){"function"==k(a)&&a.apply(b,c)});return this},isStatic:function(){return!this.timer&&!this.drag},prev:function(){return this.slide((this.current-1+this.length)%this.length)},next:function(){return this.slide((this.current+1)%this.length)},play:function(){this.playing=!0;
return this.firePlay()},firePlay:function(){var a=this;this.playing&&(this.playTimer=setTimeout(function(){a.next()},this.interval));return this},pause:function(){this.playing=!1;clearTimeout(this.playTimer);return this},slide:function(a){function b(){var a=Math.min(g,+new Date-e),d,f=a;d=-1*((f=f/g-1)*f*f*f-1)+0;cp=(k-l)*d+l;c.container.style[h]=cp+"px";a==g?c.end():c.timer=N(b)}var c=this,d=this.direction,e=+new Date,g=this.duration,f=this.current,q=Math.min(Math.max(0,a),this.length-1);a=this.getSum(q,
q+1);var l=parseFloat(r(this.container,d?"top":"left"))||0,h=d?"top":"left",d={},k;k=this.getPos(q);g*=Math.min(1,Math.abs(k-l)/a)||10;this.current=q;this.latestTime=e+g;this.fire("before",f,q);this.end=function(){delete c.timer;c.fire("after",q,f)};p?(this.timer=1,d[p]=h+" "+g+"ms ease",d[h]=k+"px",x(this.container,d)):(z(this.timer),b())},handleEvent:function(a){var b=M(a),c=1>b.button&&2>b.length&&(!this.pointerType||this.pointerType==b.eventType)&&(this.mouse||"mouse"!=b.pointerType);switch(b.eventCode){case 2:if(c&&
this.rect){a=this.current;var d=this.direction,e=[b.clientX,b.clientY],g=this.rect,c=e[d]-g[d];null==this.drag&&g.toString()!=e.toString()&&(this.drag=Math.abs(c)>=Math.abs(e[1-d]-g[1-d]))&&this.fire("dragStart",b);this.drag&&(this.pages[a+(0<c?-1:1)]||(c/=Math.abs(c)/this.size+2),this.container.style[d?"top":"left"]=this.startPos+c+"px",this.fire("dragMove",b),this._offset=c,b.preventDefault())}break;case 1:case 3:if(c){var l=this;a=this.current;var c=this.direction?"top":"left",k,h;if(b.length&&
(1==b.eventCode||this.drag))a=b.target.nodeName.toLowerCase(),clearTimeout(this.eventTimer),this.pointerType||(this.pointerType=b.eventType),this.startPos=parseFloat(r(this.container,c))||0,p?this.container.style[p]="none":this.timer&&(z(this.timer),delete this.timer),this.rect=[b.clientX,b.clientY],this.time=+new Date,this.container.style[c]=this.startPos+"px","touch"==b.eventType||"a"!=a&&"img"!=a||b.preventDefault();else if(e=this.time){c=this._offset||0;d=this.drag;k=this.startPos+c;h=this.getPos(a);
f(["rect","drag","time","startPos","_offset"],function(a){delete l[a]});if(d){for(g=0<c?1:-1;g*(k-h)>this.getOuterSize(this.pages[a])/2&&this.pages[a-g];)h=this.getPos(a-=g);20<Math.abs(c)&&500>+new Date-e&&(a-=g);this.fire("dragEnd",b);b.preventDefault()}k!=h?this.slide(a):d&&this.firePlay();this.eventTimer=setTimeout(function(){delete l.pointerType},400)}}break;case 4:this.timer&&b.preventDefault();break;case 5:b.preventDefault();this.isStatic()&&+new Date-this.latestTime>Math.max(1E3-this.duration,
0)&&(b=b.wheelDelta||-b.detail,3<=Math.abs(b)&&this[0<b?"prev":"next"]());break;case 6:a=b.target.nodeName.toLowerCase();if(this.isStatic()&&"input"!=a&&"textarea"!=a&&"select"!=a)switch(b.keyCode||b.which){case 33:case 37:case 38:this.prev();break;case 32:case 34:case 39:case 40:this.next();break;case 35:this.slide(this.length-1);break;case 36:this.slide(0)}break;case 7:this.resize();break;case 8:a.propertyName==(this.direction?"top":"left")&&(this.container.style[p]="none",this.end())}},getSum:function(a,
b){for(var c=0;a<b;)c+=this.getOuterSize(this.pages[a++],!0);return c},getPos:function(a){var b=this.direction?"Top":"Left",c=this.getOuterSize(this.pages[a],!0);a=this.getSum(0,a)+this["getMargin"+b+"Size"](this.container)+this["getBorder"+b+"Size"](this.container);switch(this.align){case "top":case "left":return-a;case "bottom":case "right":return this.size-c-a;default:return(this.size-c)/2-a}},getOuterSize:function(a,b){return a[this.direction?"offsetHeight":"offsetWidth"]+(b?this.getMarginSize(a):
0)},getInnerSize:function(a){return this.getOuterSize(a)-this.getBorderSize(a)},getSize:function(a){return a[this.direction?"offsetHeight":"offsetWidth"]-this.getPaddingSize(a)-this.getBorderSize(a)},destroy:function(){var a=this.pageData;u(this.container,v.join(" ")+" click"+(this.mousewheel?" mousewheel DOMMouseScroll":""),this.handler);u(n,A.join(" ")+(this.arrowkey?" keydown":""),this.handler);u(e,"resize",this.handler);f(this.pages,function(b,c){b.style.cssText=a[c].cssText});this.container.style.cssText=
a.container;this.container.removeChild(this.comment);this.length=0;return this.pause()},refresh:function(){this.pages=D(this.container);this.length=this.pages.length;this.current=Math.max(Math.min(this.length-1,this.current),0);return this.resize()},append:function(a,b){null==b&&(b=this.pages.length);this.pageData.splice(b,0,{cssText:a.style.cssText||""});this.container.insertBefore(a,this.pages[b]||null);return this.refresh()},prepend:function(a){return this.append(a,0)},insertBefore:function(a,
b){return this.append(a,b-1)},insertAfter:function(a,b){return this.append(a,b+1)},remove:function(a){this.container.removeChild(this.pages[a]);this.pageData.splice(a,1);return this.refresh()}};f(["margin","padding","border"],function(a){f(["Top","Left","Right","Bottom"],function(b){var c=a+b;l.prototype[h("get-"+c)+"Size"]=function(b){return parseFloat(r(b,c+("border"==a?"Width":"")))||0}});l.prototype[h("get-"+a)+"Size"]=function(b){return this[h("get-"+a)+(this.direction?"Top":"Left")+"Size"](b)+
this[h("get-"+a)+(this.direction?"Bottom":"Right")+"Size"](b)}});"function"==typeof define&&define.amd?define("TouchSlider",function(){return l}):e.TouchSlider=l})(window,function(e,l){if(!(this instanceof arguments.callee))return new arguments.callee(e,l);this.container="string"==typeof e?document.getElementById(e):e;this.init(l||{})});